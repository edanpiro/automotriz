<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <!-- form -->
        <record id="fleet_vehicle_form_inherit" model="ir.ui.view">
            <field name="name">Detalle de servicio</field>
            <field name="model">fleet.vehicle.log.contract</field>
            <field name='inherit_id' ref='fleet.fleet_vehicle_log_contract_form'/>
            <!--<field eval="1" name="priority"/>-->
            <field name="arch" type="xml">
                <!--<xpath expr="//form/class[@name='oe_right oe_button_box']" position="replace">
                </xpath>-->
                <button name="contract_close" position="replace"/>
                <button name="act_renew_contract" position="replace"/>
                <field name='date' position='replace'/>
                <field name='expiration_date' position='replace'/>
                <field name='start_date' position='replace'/>

                <field name='insurer_id' position='replace'/>
                <field name='purchaser_id' position='replace'/>
                <field name='ins_ref' position='replace'/>


                <field name="state" position="before">
                    <button name="contract_close" type="object" class="oe_highlight" string="Ingresar" groups="fleet.group_fleet_manager"/>
                    <button name='contract_reserve' string='Reservar' type='object' />
                </field>

                <field name="amount" position="after">
                    <field name='start_date' readonly='1' string="Fecha de Ingreso" attrs="{'invisible': [('state','=','open')]}" />
                    <field name='date_reserve'/>
                </field>

                <field name="vehicle_id" position="after">
                    <field name="res_partner_id" modifiers="{}"/> 
                </field>

                <field name="odometer_unit" position="after">
                	<separator string="..." colspan="2"/>
                	<label for="insurer_id"/>
                    <field name="insurer_id"/>
                    <label for="purchaser_id"/>
                    <field name="purchaser_id"/>
                    <label for="ins_ref"/>
                    <field name="ins_ref"/>
                </field>

                <field name="cost_generated" position="after">
                    <label  for="center_production"/>
                    <field name="center_production" domain="[('ubication','=','b')]"/>
                </field>

                <notebook position="inside">
                    <page String="Inventario">
                        <field name="combustible"/>
                    </page>
                </notebook>
                <page string="Included Services" position='replace'>
                   <page String="Servicios" colspan="4">
                       <field name="contact_service_ids">
                           <tree string="" editable="top">
                               <field name="product_id" on_change="on_change_product(product_id)"/>
                               <field name="price_unit"/>
                           </tree>
                       </field>
                       <group col="3" colspan="6">
                           <group colspan="1">
                           </group>
                           <group colspan="1">
                           </group>
                           <group colspan="1">
                               <field name="total" colspan="1"/>
                           </group>
                       </group>
                   </page>
                </page>
                <page string="Generated Costs" position="replace">
                    <page string="Costos">
                        <group>
                            <field name="generated_cost_ids" context="{'vehicle_id': vehicle_id}" nolabel="1" sum="amount">
                                <tree version="7.0" editable="bottom">
                                    <field name="tipo" />
                                    <field name="empleado" on_change="onchange_empleado(empleado)" />
                                    <field name="horas_plan" on_change="onchange_horas_plan(costo_hora, horas_plan)" />
                                    <field name="ini_plan" />
                                    <field name="fin_plan" />
                                    <field name="costo_hora" invisible="True" />
                                    <field name="horas_reales" on_change="onchange_horas_reales(costo_hora, horas_reales)" />
                                    <field name="date" string="Ini. Real" />
                                    <field name="fin_real" />
                                    <field name="monto_plan" string="Monto Plan" />
                                    <field name="amount" sum="amount" string="Monto Real" />
                                </tree>
                            </field>
                        </group>
                    </page>
                </page>
            </field>
        </record>


        <record model="ir.ui.view" id="fleet_vehicle_log_contract_tree_view">
            <field name="name">fleet.vehicle.log.contract.tree</field>
            <field name="model">fleet.vehicle.log.contract</field>
            <field name="type">tree</field>
            <field name="inherit_id" ref="fleet.fleet_vehicle_log_contract_tree"/>
            <field name="arch" type="xml">
                <field name="expiration_date" position="replace"/>
                <field name="start_date" position='after'>
                	<field name='date_reserve'/>
                </field>
            </field>
        </record>
        

        <record id="view_fleet_vehicle_log_contract_search" model="ir.ui.view">
            <field name="name">fleet.vehicle.log.contract</field>
            <field name="model">fleet.vehicle.log.contract</field>
            <field name="arch" type="xml">
                <search string="Contrato de Vehiculos">
                   <filter string="Reservado" name="filter_state_reserve" icon="terp-accessories-archiver-minus" domain="[('state','=','reserve')]"/>
                   
                   <separator/>
       <group expand="0" string="Mi Context...">

                   </group>
                </search>
            </field>
        </record>

        <record id="view_form_vehicle_fuel" model="ir.ui.view">
            <field name="name">Estado Inicial</field>
            <field name="model">fleet.vehicle.log.fuel</field>
            <field name='inherit_id' ref='fleet.fleet_vehicle_log_fuel_form'/>
            <field eval="1" name="priority"/>
            <field name="arch" type="xml">
              <field name="notes" position='replace' />
              <field name="vehicle_id" position="after">
                <group string="Estado Inicial">
                    <field name="llantas" />
                    <field name="gata" />
                    <field name="fallos"  />
                </group>
              </field>
              <!--<field name="fallos" position="after">
                <group string="Notes">
                  <field nolabel="1" name="notes" attrs="{'invisible': [('fallos','=', False)]}" />
                </group>
              </field>-->
              <group string="Notes">
                <field nolabel="1" name="notes" placeholder="Write here any other information" rowspan="16" attrs="{'invisible': [('fallos','=', False)]}"/>
              </group>
              <field name="notes" position="after">
                  <field name="attachment_rel" widget="many2many_binary" modifiers="{}"/>
              </field>
            </field>
        </record>

    </data>
</openerp>
