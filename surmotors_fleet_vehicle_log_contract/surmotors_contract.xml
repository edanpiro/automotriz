<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <!-- form contrato -->
        <record id="view_contract_form_inherit" model="ir.ui.view">
            <field name="name">fleet.vehicle.log.contract</field>
            <field name="model">fleet.vehicle.log.contract</field>
            <field name="priority" eval="1"/>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Contrato de Vehiculos" version="7.0">
                    <header>
                        <!--<button name='contract_close' type="object" class="oe_highlight" string="Ingresar" attrs="{'invisible': [('state', '=', 'closed')]}"/>
                        <button name='contract_reserve' string='Reservar' type='object' attrs="{'invisible': [('state', '=', 'closed')]}"/>-->
                        <button name="contract_close" string="Ingresar" states="open,reserve"/>
                        <button name="contract_reserve" string="Reservar" states="open"/>
                        <button name="cancel_contract" string="Cancelar" states="reserve"/>
                        <field name="state" widget="statusbar" statusbar_visible="open,reserve,closed"/>
                    </header>
                    <sheet>
                        <!--<group>-->
                            <!--<group col="4" colspan="2">-->
                                <div class="oe_title">
                                    <!--<div class="oe_edit_only">-->
                                        <label for="vehicle_id" string="Vehiculo"/>
                                        <h1><field name="vehicle_id" on_change="on_change_vehicle(vehicle_id)"/></h1>
                                    
                                        <label for="res_partner_id" string="Cliente"/>
                                        <h1><field name="res_partner_id" modifiers="{}"/></h1>
                                    <!--</div>-->
                                </div>
                                <div class="oe_right oe_button_box" name="buttons">
                                    <!--<button name="open" type="object" context="{'xml_id': 'vehicle_action', 'vehicle_id': 'vehicle_id'}" string="Inventario"/>-->
                                </div>
                                <group>
                                    <group col="4" colspan="2">
                                        <!--<field name="odometer"/>-->
                                        <!--<field name="insurer_id"/>-->
                                        <field name="cost_subtype_id"/>
                                        <!--<field name="amount"/>-->
                                        <field name="date_reserve"/>
                                        <field name="purchaser_id" string="Responsable"/>
                                        <field name="center_production"/>
                                    </group>
                                </group>
                            <!--</group>-->
                        <!--</group>-->
                        <notebook>
                            <page string="Servicios">
                                <field name="contact_service_ids" attrs="{'readonly': [('state', '!=', 'open')]}">
                                    <tree string="" editable="top">
                                        <field name="product_id" on_change="on_change_product(product_id)" required="1"/>
                                        <field name="price_unit" required="1"/>
                                    </tree>
                                </field>
                                <group col="3" colspan="6">
                                    <group colspan="1">
                                    </group>
                                    <group colspan="1">
                                    </group>
                                    <group colspan="1">
                                        <field name="total" colspan="1" widget="monetary" option="{'currency_id': 'currency_id'}"/>
                                    </group>
                                </group>
                            </page>
                            <page string="Mano de Obra" attrs="{'invisible': [('state','=','open')]}">
                                <group>
                                    <field name="generated_cost_ids" context="{'vehicle': vehicle_id}" nolabel="1" sum="amount">
                                        <tree version="7.0" editable="bottom">
                                            <field name="tipo"/>
                                            <field name="empleado" on_change="onchange_empleado(empleado)"/>
                                            <field name="cargo"/>
                                            <field name="horas_plan" widget="float_time" on_change="onchange_horas_plan(costo_hora, horas_plan)"/>
                                            <field name="costo_hora" invisible="True"/>
                                            <field name="horas_reales" on_change="onchange_horas_reales(costo_hora, horas_reales)"/>
                                            <field name="monto_plan" string="Monto Plan"/>
                                            <field name="amount" sum="amount" string="Monto Real"/>
                                        </tree>
                                    </field>
                                </group>
                            </page>
                            <page string="Inventario">
                                <group string="Estado de Ingreso Vehicular">
                                    <group col="2">
                                        <field name="tire"/>
                                    </group>
                                    <group col="2">
                                        <label for="odometer"/>
                                        <div>
                                            <field name="odometer" class="oe_inline"/>
                                            <field name="odometer_unit" class="oe_inline"/>
                                        </div>
                                    </group>
                                    <group col="2">
                                        <field name="hydraulic_jack"/>
                                    </group>
                                    <group col="2">
                                        <field name="attachment_rel" widget="many2many_binary"/>
                                    </group>
                                </group>
                                <group string="Nota">
                                    <field nolabel="1" name="notes"/>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- tree contrato -->
        <record id="tree_contract" model="ir.ui.view">
            <field name="name">tree.fleet.vehicle.log.contract</field>
            <field name="model">fleet.vehicle.log.contract</field>
            <field name="inherit_id" ref="fleet.fleet_vehicle_log_contract_tree"/>
            <field name="arch" type="xml">
                <data>
                    <field name="insurer_id" position="replace">
                        <field name="res_partner_id"/>
                    </field>
                    <field name="expiration_date" position="replace"/>
                    <field name="cost_generated" position="replace"/>
                    <field name="cost_frequency" position="replace"/>
                    <field name="amount" position="replace">
                        <field name="total"/>
                    </field>
                </data>
            </field>
        </record>

        <!-- form inventario -->
        <record id="view_vehicle_form" model="ir.ui.view">
            <field name="name">fleet.vehicle.log.fuel</field>
            <field name="model">fleet.vehicle.log.fuel</field>
            <field name='inherit_id' ref='fleet.fleet_vehicle_log_fuel_form'/>
            <!--<field name=""></field>-->
            <field name="arch" type="xml">
                <field name="vehicle_id" position="after">
                    <group col="2" string="Estado Inicial">
                        <field name="llantas"/>
                        <field name="gata"/>
                    </group>
                </field>
                <!--<field name="price_per_liter" position="replace"/>
                <field name="amount" position="replace"/>
                <field name="purchaser_id" position="replace"/>
                <field name="date" position="replace"/>-->
                <field name="vendor_id" position="after">
                    <field name="attachment_rel" widget="many2many_binary" modifiers="{}"/>
                </field>
            </field>
        </record>

        <record id="vehicle_action" model="ir.actions.act_window">
            <field name="name">vehicle.log.fuel</field>
            <field name="res_model">fleet.vehicle.log.fuel</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <!--<field name="context">{'search_default_fuel_id':[active_id], 'default_vehicle_id': active_id}</field>-->
            <!--<field name="context">{'search_default_log_contract_id': True}</field>-->
        </record>

        <!--<record model="ir.actions.act_window" id="vehicle_log_fuel">
            <field name="context">{'default_vehicle_id': active_id, 'search_default_vehicle_id': active_id}</field>
            <field name="name">inventario</field>
            <field name="res_model">fleet.vehicle.log.fuel</field>
        </record>

        <record model="ir.ui.view" id="contract_vehicle_view_button">
            <field name="name">contract.procurement</field>
            <field name="model">fleet.vehicle.log.contract</field>
            <field name="inherit_id" ref="surmotors.view_contract_form"/>
            <field name="arch" type="xml">
                <xpath expr="//div[@name='buttons']" position="inside">
                    <button string="inventario" name="%(vehicle_log_fuel)d" type="action"/>
                </xpath>
            </field>
        </record>-->

        <!--<record id="vehicle_view_form" model="ir.ui.view">
            <field name="name">Vehiculo</field>
            <field name="model">fleet.vehicle.log.contract</field>
            <field name="inherit_id" ref="surmotors.view_contract_form"/>
            <field name="arch" type="xml">
                <data>
                    <xpath expr="//div[@name='buttons']" position="inside">
                        <button name="%(vehicle_action)d" string="inventario" type="action"/>
                    </xpath>
                </data>
            </field>
        </record>-->
    </data>
</openerp>
